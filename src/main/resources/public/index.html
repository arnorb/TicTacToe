<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Hello world</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- load bootstrap for nicer ui -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  </head>
  <body>

    <div class="container">
      <h1>Hello, world!</h1>

      <p>Leggðu saman tvær tölur að eigin vali og sannreyndu útkomuna.</p>

      <form method="post" action="/add" class="form-inline" role="form">
        <div class="form-group">
          <input type="text" class="form-control" name="a" id="a" placeholder="Tala 1">
        </div>
        <div class="form-group">
          <input type="text" class="form-control" name="b" id="b" placeholder="Tala 2">
        </div>
        <button type="submit" class="btn btn-default">Sign in</button>

      <hr>
      <div id="results">
      </div>
    </div>
    <div>
      <table>
        <tr>
          <td id="td_1"><button n="0" value=""  class="b_button" ></td>
          <td id="td_1"><button n="1" value=""  class="b_button"></td>
          <td id="td_1"><button n="2" value=""  class="b_button"></td>
        </tr>
        <tr>
          <td id="td_1"><button n="3" value=""  class="b_button"></td>
          <td id="td_1"><button n="4" value=""  class="b_button"></td>
          <td id="td_1"><button n="5" value=""  class="b_button"></td>
        </tr>
        <tr>
          <td id="td_1"><button n="6" value=""  class="b_button"></td>
          <td id="td_1"><button n="7" value=""  class="b_button"></td>
          <td id="td_1"><button n="8" value=""  class="b_button"></td>
        </tr>
      </table>
    </div>

      </form>
    <!-- load jquery -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <!-- use ajax to submit form, retreive the result and display on the page -->
    <script>
    $(document).ready(function() {

      var player = 1;

      $( ".b_button" ).click(function() {
        
        if(player == 1){
          x = 'x';
          player = 2;
        }
        else
        {
          x = 'o';
          player = 1;
        }
        //$( this ).attr(value, player)
        $( this ).parent().html(x);
        send($( this ).attr('n')); 
      });
    });

      function send(i){

              var val = i;
              console.log  ("jallla:" + val);

              $.ajax({
                type: 'post',
                url: '/add',
                data: 'val=' + val
              }).done(function(win) {
                if (win = true)
                $('#results').html('player' + player + ' wins!!!!!!').attr('class', 'alert alert-success');
              }).fail(function() {
                $('#results').html('Villa kom upp').attr('class', 'alert alert-danger');
              });

      }

    </script>
  </body>
</html>